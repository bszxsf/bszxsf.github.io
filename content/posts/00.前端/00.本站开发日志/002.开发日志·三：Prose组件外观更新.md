---
published: 2025-06-06T17:21+0800
---

# å¼€å‘æ—¥å¿—Â·ä¸‰ï¼šProseç»„ä»¶å¤–è§‚æ›´æ–°

æœ¬æ¬¡æ›´æ–°ä¸»è¦ç€çœ¼äºproseç»„ä»¶çš„å¤–è§‚ï¼Œç§»é™¤äº†`@tailwindcss/typography`ä¾èµ–å¹¶é‡å†™proseç»„ä»¶æ ·å¼ã€‚éƒ¨åˆ†ç»„ä»¶è¿˜éœ€è¦åç»­è¿›ä¸€æ­¥é‡ç½®ã€‚

> **Note**ï¼šé‡å†™proseç»„ä»¶çš„åŸºæœ¬åŸç†æ˜¯åœ¨`~/components/content`ä¸‹åˆ›å»ºåŒåç»„ä»¶ã€‚å¯ç”¨proseç»„ä»¶å‚è§[Nuxt Contentçš„æ–‡æ¡£](https://content.nuxt.com/docs/components/prose)ã€‚

> **Note**ï¼šæœ¬æ–‡æ‰€è¿°æ–¹æ¡ˆä¸­ï¼Œåœ¨éœ€è¦proseç»„ä»¶çš„åœ°æ–¹ï¼Œéœ€è¦ç»™æ ¹å…ƒç´ æ·»åŠ `prose`ç±»ã€‚

> **Note**ï¼šç»å¤§å¤šæ•°proseç»„ä»¶å…è®¸åœ¨å…¶åæ·»åŠ ä¸€å¯¹å¤§æ‹¬å·ï¼Œå¤§æ‹¬å·å†…å®šä¹‰ä¸€ç³»åˆ—propså±æ€§ï¼Œå…¶è¯­æ³•ä¸æ ‡å‡†HTMLæ ‡ç­¾å†…æŒ‡å®šå±æ€§çš„è¯­æ³•ä¸€è‡´ã€‚

æˆ‘ä»¬æŠŠæ‰€æœ‰æ ·å¼æ”¾åœ¨`~/assets/styles/prose.css`ä¸­ï¼›è¿™åªæ˜¯æˆ‘é€‰æ‹©çš„è·¯å¾„ï¼Œå®é™…ä¸Šå…¶ä»–è·¯å¾„ä¹Ÿå¯ä»¥ã€‚åˆ«å¿˜è®°åœ¨Nuxté…ç½®æ–‡ä»¶ä¸­å¼•å…¥æ–°çš„æ ·å¼æ–‡ä»¶ã€‚

## é—®é¢˜ï¼š`ElBacktop`ä¸æ˜¾ç¤º

é¦–å…ˆæˆ‘ä»¬æ¥ä¿®å¤ä¸€ä¸ªbugã€‚ä¸çŸ¥é“å“ªä¸ªcommitèµ·ï¼Œé¡µé¢ä¸Šçš„å›åˆ°é¡¶éƒ¨æŒ‰é’®ä¸å†æ˜¾ç¤ºäº†ï¼›å¯èƒ½ä¸ä¹‹å‰æŸæ¬¡è°ƒæ•´é¡µé¢æ»šåŠ¨æ¡æœ‰å…³ã€‚æ—©å…ˆä»£ç ä¸­ï¼Œç‚¹å‡»é”šç‚¹åè·³è½¬çš„ä½ç½®å°†æ˜¯æ•´ä¸ªçª—å£çš„æœ€ä¸Šæ–¹ï¼Œè¢«é¡¶éƒ¨å¯¼èˆªæ ç›–ä½ï¼›äºæ˜¯æˆ‘å°†æ»šåŠ¨æ¡è°ƒæ•´ä¸ºä¼´éš`ElMain`ï¼Œä¹Ÿå³å†…å®¹åŒºã€‚

è§£å†³æ–¹æ³•ï¼šè®¾ç½®`ElBacktop`çš„`target`å±æ€§ã€‚è¯¥å±æ€§æ¥å—ä¸€ä¸ªå…ƒç´ é€‰æ‹©å™¨ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨idé€‰æ‹©å™¨ã€‚ä¸º`ElMain`æ·»åŠ å±æ€§`id="app-content-frame"`åä¸º`ElBacktop`æ·»åŠ å±æ€§`target="#app-content-frame"`ã€‚

## ç§»é™¤ä¾èµ–

æ‰§è¡Œ`npm uninstall @tailwindcss/typography`ï¼Œ`~/assets/styles/main.css`ä¸­çš„`@plugin`æŒ‡ä»¤ä¹Ÿè¦å»é™¤ã€‚å®Œæˆè¿™ä¸€æ­¥åï¼Œæ–‡ç« ç»„ä»¶å°†ä¼šå˜æˆæ— æ ·å¼çŠ¶æ€ã€‚

åˆ«å¿˜è®°æŠŠ`prose-invert`ç±»å»æ‰ï¼Œæˆ‘ä»¬ä½¿ç”¨Element Pluså’ŒShikiçš„è‰²å½©æ–¹æ¡ˆã€‚æœ¬æ–‡ä½¿ç”¨ä¸€ç§æ‰‹å†™`prose`ç±»æ ·å¼çš„æ–¹æ¡ˆæ¥é‡åˆ¶proseç»„ä»¶ã€‚

## å®šä¹‰å˜é‡

ä¸ºäº†æ–¹ä¾¿ç»´æŠ¤ï¼Œæˆ‘ä»¬åœ¨`prose`ç±»é‡Œå®šä¹‰ä¸€ä¸ªCSSå˜é‡ï¼Œå®ƒæ§åˆ¶å¤šæ•°ç»„ä»¶çš„ç«–ç›´é—´è·ã€‚

```css
.prose {
  --app-prose-v-margin: 1.25em;
}
```

## `ProseA`

### `NuxtLink`ä¸é“¾æ¥å®‰å…¨æ€§

`NuxtLink`æ˜¯Nuxtæä¾›çš„é“¾æ¥ç»„ä»¶ï¼Œåœ¨ä»»ä½•æœ‰å¯èƒ½çš„æƒ…å†µä¸‹ï¼ŒNuxté¡¹ç›®ä¸­åº”ä»¥å®ƒä»£æ›¿`a`å…ƒç´ ã€‚è¿™æ¶‰åŠåˆ°é“¾æ¥çš„`rel`å±æ€§ä¸ä¸€äº›å®‰å…¨æ€§å’Œéšç§é—®é¢˜ï¼š

- å½“é€šè¿‡é“¾æ¥æ‰“å¼€ä¸€ä¸ªæ–°é¡µé¢æ—¶ï¼Œæ–°é¡µé¢å°†èƒ½å¤Ÿé€šè¿‡`window.opener`è·å–ä¹‹å‰çš„é¡µé¢ï¼Œå¹¶å¯èƒ½è¿›è¡Œä¸€äº›æ¶æ„æ“ä½œã€‚`noopener`å¯ä»¥å°†è¯¥å±æ€§è®¾ç½®ä¸º`null`ï¼Œä»è€Œæœç»è¿™ä¸€é—®é¢˜ã€‚
- HTTPè¯·æ±‚ä¸­åŒ…å«äº†ä¸€ä¸ª`Referer`è¯·æ±‚å¤´ï¼ˆæˆ‘å¹¶æ²¡æœ‰æ‹¼å†™é”™è¯¯ï¼Œè¿™ä¸ªé”™è¯¯ä»æœ‰å…³RFCæ–‡æ¡£å‡ºç°çš„ç¬¬ä¸€å¤©èµ·å°±å­˜åœ¨ï¼Œè€Œä¸”å› ä¸ºå†å²é—ç•™é—®é¢˜ä»æœªå¾—åˆ°ä¿®æ­£ï¼‰ï¼Œå½“ç”¨æˆ·é€šè¿‡é“¾æ¥è®¿é—®ä¸€ä¸ªæ–°é¡µé¢æ—¶ï¼Œæ–°é¡µé¢å¯ä»¥ä»è¿™ä¸ªè¯·æ±‚å¤´ä¸­å¾—çŸ¥ç”¨æˆ·æ¥è‡ªå“ªé‡Œçš„é“¾æ¥ã€‚`noreferrer`ä¼šåœ¨æ‰“å¼€æ–°æ ‡ç­¾æ—¶ä¸å‘é€`Referer`è¯·æ±‚å¤´ï¼Œä»è€Œé¿å…ç”¨æˆ·çš„è®¿é—®è¢«è¿½è¸ªã€‚
- å¾ˆå¤šæ—¶å€™æœç´¢å¼•æ“çˆ¬è™«ä¼šè·Ÿéšé“¾æ¥è®¿é—®å…¶ä»–é¡µé¢ï¼Œä»¥è¿™ç§æ–¹å¼æ”¶é›†ç«™ç‚¹ä¿¡æ¯ã€‚è¿™ä¼šå¯¼è‡´æœç´¢å¼•æ“æƒé‡å‘è¢«é“¾æ¥ç½‘ç«™è½¬ç§»ï¼›æœ‰äº›æƒ…å†µä¸‹ç½‘ç«™ç»´æŠ¤è€…ä¸å¸Œæœ›å‘ç”Ÿè¿™æ ·çš„äº‹æƒ…ï¼Œæ¯”å¦‚è¯´ç”¨æˆ·ç”Ÿæˆå†…å®¹ï¼ˆä¾‹å¦‚è¯„è®ºåŒºï¼‰ä¸­çš„é“¾æ¥ä¸ä¸€å®šå¯ä¿¡ï¼Œè€Œå•†ä¸šåˆä½œä¼™ä¼´é“¾æ¥ä¹Ÿå¯èƒ½å¯¼è‡´æµé‡è½¬ç§»åˆ°å¯¹æ–¹ã€‚`nofollow`å±æ€§å€¼å¯ä»¥é¿å…æœç´¢å¼•æ“çˆ¬è™«è·Ÿéšè¢«æ ‡è®°çš„é“¾æ¥ã€‚

ä¸ºæ­¤ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä¸ºæ‰€æœ‰é“¾æ¥æ·»åŠ `rel="noopener noreferrer"`å±æ€§ï¼Œ`nofollow`çš„æ·»åŠ åˆ™å–å†³äºå…·ä½“æƒ…å†µï¼ˆä¸ºæ¯ä¸ªé“¾æ¥å•ç‹¬åŠ å±æ€§æ¯”è¾ƒç¹çï¼Œæ‰€ä»¥æœ¬ç«™ç›®å‰ä¸ºæ‰€æœ‰åšå®¢æ–‡ç« ä¸­çš„é“¾æ¥æ·»åŠ äº†å…¨éƒ¨3ä¸ªå±æ€§å€¼ï¼‰ã€‚`NuxtLink`ç»„ä»¶ä¼šåˆ¤æ–­é“¾æ¥æ˜¯å¦æ˜¯å¤–é“¾ï¼Œå¹¶ä¸ºå¤–é“¾æ·»åŠ `rel="noopener noreferrer"`å±æ€§ï¼Œå‚è§[NuxtLinkçš„è¯´æ˜](https://nuxt.com/docs/api/components/nuxt-link#rel-and-norel-attributes)ã€‚

ç„¶è€Œè¿™é‡Œå¼•å‡ºäº†ä¸€ä¸ªé—®é¢˜ï¼šNuxt Contentä¸­ï¼Œmarkdownæ–‡ä»¶å†…éƒ¨çš„é“¾æ¥å°†ä¼šè¢«èµ‹äºˆ`rel="nofollow"`å±æ€§å€¼ï¼Œè€Œç¼ºä¹ä¿éšœå®‰å…¨çš„å±æ€§å€¼ã€‚å³ä¾¿é‡å†™`ProseA`ç»„ä»¶ä¹Ÿæ˜¯æ²¡æœ‰ç”¨çš„ï¼šæˆ‘ä»¬å¤§å¯ä»¥å°†`rel`ä½œä¸ºpropså±æ€§ä¼ å…¥ä¸”ç»™å‡ºä¸€ä¸ªé»˜è®¤å€¼ï¼Œä½†Nuxt Contentåœ¨æ¸²æŸ“æ—¶å·²ç»ç»™`ProseA`ç»„ä»¶æ˜¾å¼ä¼ å…¥äº†`rel="nofollow"`ï¼Œä½¿å¾—ä»»ä½•å½¢å¼çš„é»˜è®¤å€¼è®¾å®šéƒ½ä¸å¯èƒ½ç”Ÿæ•ˆã€‚è€Œç›´æ¥ç¡¬ç¼–ç è¯¥å±æ€§åˆ™æ˜¯ä¸€ä¸ªå¸¸è§çš„ç³Ÿç³•å®è·µï¼Œä½¿å¾—åº”ç”¨å˜å¾—ä¸å¤Ÿçµæ´»ã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆå‘¢ï¼Ÿ

### ä½¿ç”¨`rehype-external-links`è¦†ç›–`rel`é»˜è®¤å€¼

æˆ‘ä»¬éœ€è¦ç”¨åˆ°`rehype-external-links`è¿™ä¸ªç»„ä»¶ã€‚å°½ç®¡ä¸çŸ¥é“æ˜¯å“ªä¸ªåŒ…æºå¸¦çš„ä¾èµ–ï¼Œä½†æ˜¯æˆ‘å‘ç°æœ¬åœ°å·²ç»å®‰è£…äº†è¿™ä¸ªåŒ…ï¼ˆåœ¨`package-lock.json`ä¸­ï¼‰ã€‚

åœ¨`nuxt.config.ts`ä¸­çš„`content.build.markdown.rehypePlugins`ä¸‹æ·»åŠ é…ç½®é¡¹ï¼š

```ts
export default defineNuxtConfig({
  content: {
    build: {
      markdown: {
        rehypePlugins: {
          'rehype-external-links': {
            options: {
              target: '_blank',
              rel: ['nofollow', 'noopener', 'noreferrer']
            }
          }
        }
      }
    }
  }
});
```

è¿™ä¸ªæ’ä»¶ä¼šæŠŠæ‰€æœ‰å¤–é“¾è®¾å®šä¸ºé»˜è®¤åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€ï¼Œå¹¶ç»™`rel`è®¾å®šå…¨éƒ¨3ä¸ªå±æ€§å€¼ã€‚å¯ä»¥æŒ‰éœ€æ±‚ä¿®æ”¹ã€‚

### é“¾æ¥æ ·å¼

è¿™é‡Œï¼Œæˆ‘ä»¬çš„è®¾è®¡å¤–è§‚æ˜¯ï¼š

- é“¾æ¥æ–‡æœ¬ä¸‹æ–¹æœ‰ç‚¹çŠ¶ä¸‹åˆ’çº¿ï¼›
- é¼ æ ‡æ‚¬æµ®æ—¶é“¾æ¥é¢œè‰²æ”¹å˜ï¼›
- é“¾æ¥å‰æœ‰ä¸€ä¸ªğŸ”—å­—ç¬¦ã€‚

#### é€‰æ‹©å™¨çš„ä¹¦å†™

ä¹¦å†™é€‰æ‹©å™¨æ—¶ï¼Œè¦æ³¨æ„ï¼š

- åªåº”ç”¨äºå¸¦`prose`ç±»çš„å…ƒç´ çš„åä»£ï¼›
- ä¸åº”ç”¨äºå¸¦`not-prose`ç±»çš„å…ƒç´ åŠå…¶åä»£ï¼›
- ä¸è¦å½±å“å…¶ä»–proseç»„ä»¶ã€‚

é‚£ä¹ˆæ˜¾ç„¶åœ°ï¼Œæ‰€æœ‰ç»„ä»¶éƒ½éœ€è¦`.prose`é€‰æ‹©å™¨å’Œ`:not(.not-prose)`é€‰æ‹©å™¨ã€‚

> **Note**ï¼š`:not()`ä¼ªç±»æ¥å—ä¸€ç»„é€—å·åˆ†å¼€çš„é€‰æ‹©å™¨åˆ—è¡¨ï¼Œåªè¦ä¸€ä¸ªå…ƒç´ æ»¡è¶³åˆ—è¡¨ä¸­ä»»ä½•ä¸€ä¸ªé€‰æ‹©å™¨çš„çº¦æŸï¼Œè¯¥å…ƒç´ å°±ä¼šè¢«æ’é™¤ã€‚

ç”±äºNuxt Contentæ¸²æŸ“proseç»„ä»¶æ—¶ï¼Œä¹Ÿä¼šç»™æ ‡é¢˜æ·»åŠ é”šç‚¹é“¾æ¥ï¼Œæ‰€ä»¥è¿˜éœ€è¦åœ¨`:not()`ä¼ªç±»ä¸­æŒ‡å®šæ’é™¤`h2 > a`åˆ°`h6 > a`ï¼ˆ`h1`è¢«ç”¨äºæ–‡ç« ä¸»æ ‡é¢˜ï¼Œä¸ä¼šäº§ç”Ÿé”šç‚¹ï¼Œå› æ­¤ä¸éœ€è¦`h1 > a`ï¼‰ã€‚

> **Note**ï¼š`>`æ˜¯å­é€‰æ‹©å™¨ï¼Œé€‰æ‹©æ‰€æœ‰è‡ªèº«æ»¡è¶³å…¶å³ä¾§é€‰æ‹©æ¡ä»¶ï¼Œä¸”ç›´æ¥ä¸Šçº§å…ƒç´ ï¼ˆä¹Ÿå³ä¸è€ƒè™‘æ›´è¿œçš„ç¥–å…ˆå…ƒç´ ï¼‰æ»¡è¶³å…¶å·¦ä¾§é€‰æ‹©æ¡ä»¶çš„å…ƒç´ ã€‚æœ‰äº›èµ„æ–™å£°ç§°å®ƒæ¯”åä»£é€‰æ‹©å™¨å¿«ï¼Œä½†æˆ‘æ²¡æœ‰çœ‹åˆ°ç›´æ¥è¯æ®ã€‚æœ¬æ–‡è¿™é‡Œä¸ä½¿ç”¨åä»£é€‰æ‹©å™¨çš„ä¸»è¦åŸå› æ˜¯åä»£é€‰æ‹©å™¨ä¼šå¯¼è‡´æœ‰æ„åœ¨æ ‡é¢˜ä¸­æ’å…¥çš„é“¾æ¥å¤±æ•ˆï¼Œè€Œå­é€‰æ‹©å™¨ä¸åº”å‡ºç°è¿™ç§æƒ…å†µã€‚

##### ç‚¹çŠ¶ä¸‹åˆ’çº¿

ç°åœ¨æˆ‘ä»¬æ·»åŠ ç¬¬ä¸€ä¸ªè§„åˆ™ï¼š

```css
.prose a:not(h2 > a, h3 > a, h4 > a, h5 > a, h6 > a, .not-prose) {
  text-decoration: underline dotted;
  /* è¿™ä¸ªoffsetæ˜¯ä¸ºäº†é¿å…ä¸‹åˆ’çº¿ç¦»æ–‡æœ¬è¿‡è¿‘ï¼Œè¿‡è¿‘çš„è¯ä¼šæ¯”è¾ƒä¸‘ã€‚ */
  text-underline-offset: 0.25em;
}
```

##### é¼ æ ‡æ‚¬æµ®æ•ˆæœ

ä½¿ç”¨`:hover`ä¼ªç±»ï¼š

```css
.prose a:not(h2 > a, h3 > a, h4 > a, h5 > a, h6 > a, .not-prose):hover {
  color: var(--el-text-color-primary);
  transition: color 0.125s;
}
```

> **Note**ï¼š`:hover`ä¼ªç±»ç”¨äºè®¾å®šé¼ æ ‡æ‚¬æµ®æ—¶çš„æ ·å¼ï¼Œç»å¸¸æ­é…`transition`å±æ€§å®ç°æ‚¬æµ®åŠ¨æ•ˆã€‚
>
> å¯¹åˆå­¦è€…è€Œè¨€åº”æ³¨æ„çš„æ˜¯ï¼Œå¯¹æŸå…ƒç´ åº”ç”¨ä¼ªç±»å’Œä¼ªå…ƒç´ æ—¶ï¼Œä¸è¦åœ¨é€‰æ‹©å™¨å’Œä¼ªç±»ã€ä¼ªå…ƒç´ ä¹‹é—´åŠ ç©ºæ ¼ï¼Œç©ºæ ¼ä¸€èˆ¬è¡¨ç¤ºåä»£é€‰æ‹©å™¨ï¼›åœ¨é€‰æ‹©å™¨å’Œä¼ªç±»ä¹‹é—´åŠ ç©ºæ ¼ä¼šè¢«è§£é‡Šä¸ºï¼šåº”ç”¨ä¼ªç±»åˆ°é€‰æ‹©å™¨æ‰€çº¦æŸä¹‹å…ƒç´ çš„æ‰€æœ‰åä»£ï¼ˆç›¸å½“äºåœ¨åä»£é€‰æ‹©å™¨åã€ä¼ªç±»ä¹‹å‰åº”ç”¨é€šé…é€‰æ‹©å™¨ï¼‰ã€‚

##### å‰ç½®å›¾æ¡ˆ

æˆ‘ä»¬ä½¿ç”¨`before`ä¼ªå…ƒç´ æ¥åšè¿™ä»¶äº‹ï¼š

```css
.prose a:not(h2 > a, h3 > a, h4 > a, h5 > a, h6 > a, .not-prose)::before {
  content: 'ğŸ”—';
}
```

> **Note**ï¼š`before`ä¼ªå…ƒç´ ä¼šåœ¨å…ƒç´ å†…éƒ¨çš„å‰éƒ¨ï¼ˆå¯¹æ–‡æœ¬è€Œè¨€é€šå¸¸å°±æ˜¯å·¦ä¾§ï¼‰æ·»åŠ ä¸€äº›å†…å®¹ï¼Œå†…å®¹ç”±`content`å±æ€§å†³å®šã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå³ä¾¿éœ€è¦éšè—å®ƒçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¹Ÿä¸ä¼šçœç•¥è¯¥å±æ€§æˆ–ç½®ä¸º`none`ï¼›é‚£æ ·åšä¼šå¯¼è‡´ä¼ªå…ƒç´ ä¸æ¸²æŸ“ï¼Œç­‰åŒäº`display: none`ï¼Œå¯èƒ½å¯¼è‡´ä¸€äº›`transition`æ•ˆæœä¸ç¬¦åˆé¢„æœŸä¹‹ç±»å¥‡æ€ªçš„é—®é¢˜ã€‚æˆ‘ä»¬é€šå¸¸ä½¿ç”¨`content: ''`æˆ–è€…`opacity: 0`æ¥éšè—ä¼ªå…ƒç´ ï¼Œå¦‚æœéœ€è¦åŠ¨ç”»ï¼Œåè€…æ›´åŠ å®¹æ˜“æ§åˆ¶ã€‚

##### æ‹“å±•ï¼šåµŒå¥—é€‰æ‹©å™¨

åµŒå¥—é€‰æ‹©å™¨`&`ä¹Ÿå¯ä»¥ç”¨äºå®ç°ç›¸åŒçš„åŠŸèƒ½ï¼Œä¸”ä»£ç æ›´ç®€æ´ï¼ŒåŒä¸€ç»„ä»¶çš„æ ·å¼å¯ä»¥è¢«å†™åœ¨ä¸€èµ·ã€‚é—®é¢˜åœ¨äºè¯¥é€‰æ‹©å™¨çš„æ”¯æŒåœ¨2023å¹´ä¸‹åŠå¹´æ‰åŸºæœ¬æˆä¸ºä¸»æµï¼Œä»Šå¤©å¾ˆå¯èƒ½è¿˜æœ‰ä¸ºæ•°ä¸å°‘çš„è®¾å¤‡ä¸æ”¯æŒè¿™äº›å±æ€§ã€‚å¹¶ä¸”ï¼Œæˆ‘è¿˜å‘ç°æœ‰äº›æµè§ˆå™¨çš„è°ƒè¯•å™¨å¯¹è¿™ç§è¯­æ³•æ”¯æŒæœ‰é™ï¼›è™½ç„¶æ ·å¼è¢«æ­£ç¡®æ¸²æŸ“äº†ï¼Œä½†æ˜¯è°ƒè¯•å™¨å¹¶æ²¡æœ‰å°†ä¼ªå…ƒç´ æ ·å¼æ”¾è¿›â€œä¼ªå…ƒç´ â€åˆ†åŒºå†…ï¼ˆä¹Ÿè®¸æ˜¯æœ‰æ„è¿™æ ·è®¾è®¡çš„ï¼‰ï¼Œè¿™å¯¼è‡´å¼€å‘è€…è¿›è¡Œè°ƒè¯•æ—¶è¦å¤šèŠ±ç‚¹åŠŸå¤«åœ¨ä¸€å¤§å †è§„åˆ™é‡Œæ‰¾åˆ°å­è§„åˆ™ã€‚ä½†æ˜¯ä¸è€ƒè™‘è°ƒè¯•å¸¦æ¥çš„è§†åŠ›æŸå®³çš„è¯ï¼Œæˆ‘è®¤ä¸ºåµŒå¥—é€‰æ‹©å™¨ç›¸å½“æœ‰æ½œåŠ›ï¼Œéå¸¸å€¼å¾—å™è¿°ä¸€ä¸‹ã€‚

æ€»çš„æ¥è¯´ï¼ŒåµŒå¥—é€‰æ‹©å™¨`&`çš„ä½œç”¨ç±»ä¼¼å®å±•å¼€ï¼ˆä¸è¿‡ä¼¼ä¹åªèƒ½æ”¾åœ¨é€‰æ‹©å™¨å¼€å¤´æˆ–è€…ç»“å°¾ï¼Œä¸èƒ½æ”¾åœ¨ä¸­é—´ï¼Œæˆ‘ä¸æ˜¯å¾ˆç¡®å®šï¼‰ï¼šå­è§„åˆ™ä¸­å‡ºç°åµŒå¥—é€‰æ‹©å™¨æ—¶ï¼Œè¯¥è§„åˆ™çš„æ€»ä½“çº¦æŸç›¸å½“äºç”¨ä¸Šçº§è§„åˆ™ç›´æ¥æ›¿æ¢æ‰åµŒå¥—é€‰æ‹©å™¨`&`çš„ä½ç½®ã€‚ä¾‹å¦‚ï¼š

```css
.cls1 {
  & .cls2 {
  }
}
/* ç­‰ä»·äº */
.cls1 .cls2 {
}

.cls1 {
  &:hover {
  }
}
/* ç­‰ä»·äº */
.cls1:hover {
}

/* ç”±äºå…¶ç±»ä¼¼äºå®æ›¿æ¢çš„æ€§è´¨ï¼Œä¸è¦éšæ„å¢åˆ ç©ºæ ¼ */
.cls1 {
  & :hover {
  }
}
/* ç­‰ä»·äº */
.cls1 *:hover {
}

.cls1 {
  :where(h1, h2) & {
  }
}
/* ç­‰ä»·äº */
:where(h1, h2) .cls1 {
}
```

ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å¯ä»¥éå¸¸å®¹æ˜“åœ°æ„è¯†åˆ°ï¼Œæ•´ä¸ª`ProseA`çš„æ‰€æœ‰ä¸‰ä¸ªè§„åˆ™å¯ä»¥ç”¨åµŒå¥—è¯­æ³•é‡å†™ä¸ºï¼š

```css
.prose a:not(h2 > a, h3 > a, h4 > a, h5 > a, h6 > a, .not-prose) {
  text-decoration: underline dotted;
  text-underline-offset: 0.25em;

  &::before {
    content: 'ğŸ”—';
  }
  &:hover {
    color: var(--el-text-color-primary);
    transition: color 0.125s;
  }
}
```

è¿™å’Œå‰æ–‡çš„ä¸‰ä¸ªè§„åˆ™æ˜¯å®Œå…¨ç­‰ä»·çš„ï¼›ä½†æ˜¯è°ƒè¯•å™¨é‡Œçœ‹èµ·æ¥ä¸ä¸€æ ·ï¼Œä¸çŸ¥é“ä»¥åçš„æµè§ˆå™¨æ›´æ–°æ˜¯å¦ä¼šæ”¹è¿›ã€‚

## `ProseBlockquote`

`ProseBlockquote`çš„å®ç°ä¸­éœ€è¦æ·»åŠ ä¸€ä¸ªåœ¨æ•´ä¸ªå—å·¦ä¾§çš„æ¡çº¹ï¼ˆç”¨è¡Œå†…è”è¾¹æ¡†`border-inline`æ¥å®ç°ï¼‰ã€‚åŸºç¡€è§„åˆ™éå¸¸ç®€å•ï¼Œåªéœ€è¦æŒæ¡å‡ ä¸ªå±æ€§ï¼š

```css
.prose blockquote:not(.not-prose) {
  /* æ¡çº¹é¢œè‰² */
  border-inline-start-color: var(--el-border-color-dark);
  /* æ¡çº¹å®½åº¦ */
  border-inline-start-width: 0.25em;
  /* æ¡çº¹è·ç¦»æ–‡æœ¬çš„å®½åº¦ï¼ˆè®¾ä¸º0çš„è¯æ¡çº¹å³ä¾§å°†ç´§è´´æ–‡æœ¬å·¦ä¾§ï¼‰ */
  padding-inline-start: 1em;
  /* æ–œä½“ */
  font-style: italic;
  /* é—´è·ï¼Œé˜²æ­¢ç´§è´´å‰åå…¶ä»–ç»„ä»¶å’Œæ–‡æœ¬ */
  margin: var(--app-prose-v-margin) 0;
}
```

çœŸæ­£æœ‰æ„æ€çš„æ˜¯å¦‚ä½•ç»™å¼•ç”¨å—çš„å‰åæ·»åŠ å¼•å·ï¼Œè¿™æ¯«æ— ç–‘é—®éœ€è¦`before`å’Œ`after`ä¼ªå…ƒç´ ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼šä¸åŒè¯­è¨€çš„å¼•å·æœ‰å·®å¼‚ï¼Œè¦é€‰æ‹©å“ªç§è¯­è¨€çš„å¼•å·å‘¢ï¼ŸCSSæä¾›äº†ä¸€ä¸ªæ ‡å‡†çš„è§£å†³æ–¹æ¡ˆï¼š`open-quote`å’Œ`close-quote`ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨è¿™ä¸¤ä¸ªå±æ€§å€¼ã€‚

ç›´æ¥åœ¨`blockquote`å…ƒç´ çš„`before`å’Œ`after`ä¼ªå…ƒç´ ä¸Šæ·»åŠ å¼•å·æ˜¯ä¸å¯è¡Œçš„ï¼Œå¼•å·ä¼šè¢«æ·»åŠ åœ¨ç¬¬ä¸€ä¸ª`p`æ ‡ç­¾ä¹‹å‰å’Œæœ€åä¸€ä¸ª`p`æ ‡ç­¾ä¹‹åï¼Œè€Œæ¯ä¸ª`p`å…ƒç´ éƒ½ä¼šå¦èµ·ä¸€è¡Œï¼Œå¯¼è‡´ä¸¤ä¸ªå¼•å·å¤„äºå•ç‹¬çš„è¡Œï¼Œè¿™æ ·è§†è§‰æ•ˆæœä¼šå¾ˆå¥‡æ€ªã€‚å› æ­¤æˆ‘ä»¬éœ€è¦ç»™ç¬¬ä¸€ä¸ª`p`å…ƒç´ æ·»åŠ `before`ä¼ªå…ƒç´ ï¼Œæœ€åä¸€ä¸ª`p`å…ƒç´ æ·»åŠ `after`ä¼ªå…ƒç´ ï¼Œå¦‚ä¸‹ï¼š

```css
.prose blockquote:not(.not-prose) p:first-of-type::before {
  content: open-quote;
}
.prose blockquote:not(.not-prose) p:last-of-type::after {
  content: close-quote;
}
```

> **Note**ï¼š`:first-of-type`ä¼ªç±»éœ€è¦ç´§è·Ÿåœ¨ä¸€ä¸ªæ ‡ç­¾åä¹‹åã€‚è¯¥ä¼ªç±»ä¼šé€‰æ‹©æ‰€æœ‰æ»¡è¶³å‰è¾¹é€‰æ‹©å™¨çº¦æŸä¸”å…·æœ‰æŒ‡å®šæ ‡ç­¾çš„å…ƒç´ ä¹‹ä¸­ï¼Œç¬¬ä¸€ä¸ªå‡ºç°çš„å…ƒç´ ã€‚ä¸Šæ–‡ä¸­çš„ç¬¬ä¸€ä¸ªè§„åˆ™å³æ˜¯ï¼šåœ¨æ‰€æœ‰åº”ç”¨äº†`prose`ç±»ä¸”æ²¡æœ‰åº”ç”¨`not-prose`ç±»çš„`blockquote`æ ‡ç­¾ä¸­ï¼Œé€‰æ‹©æ‰€æœ‰åä»£ä¸­çš„ç¬¬ä¸€ä¸ª`p`æ ‡ç­¾å…ƒç´ ï¼Œæ­¤è§„åˆ™åº”ç”¨äºå…¶`before`ä¼ªå…ƒç´ ã€‚
>
> `:last-of-type`ä¼ªç±»ä¸æ­¤ç±»ä¼¼ï¼Œä½†é€‰æ‹©æœ€åä¸€ä¸ªå‡ºç°çš„å…ƒç´ ã€‚

æˆ‘ä»¬æ¥çœ‹çœ‹æ•ˆæœï¼š

> å¤§æ˜æ¹–ï¼Œæ˜æ¹–å¤§ï¼Œ
>
> å¤§æ˜æ¹–é‡Œæœ‰è·èŠ±ï¼Œ
>
> è·èŠ±ä¸Šé¢æœ‰è›¤èŸ†ï¼Œ
>
> ä¸€æˆ³ä¸€è¹¦è·¶

## `ProseCode`

è¿™ä¸ªç»„ä»¶çš„ç»å¤§å¤šæ•°é€»è¾‘äº¤ç”±Nuxt Contentå’ŒShikiå¤„ç†å³å¯ï¼Œå³ä¾¿ä¸æ·»åŠ `~/components/content/ProseCode.vue`ï¼Œè¯­æ³•é«˜äº®ä¹Ÿä¼šè¢«æ­£ç¡®å¤„ç†ï¼Œæˆ‘ä»¬åªéœ€è¦å¤„ç†æ ·å¼ã€‚

ä¹¦å†™è¯¥ç»„ä»¶çš„é€‰æ‹©å™¨æ—¶åº”æ³¨æ„ä¸€ä¸ªç»†èŠ‚ï¼š`ProsePre`ä¸­ä¹Ÿä¼šæœ‰`code`æ ‡ç­¾å…ƒç´ ï¼Œå› æ­¤`.prose code:not(.not-prose)`å¹¶ä¸è¶³å¤Ÿï¼Œåº”ä¸º`.prose code:not(pre code, .not-prose)`ï¼Œä»è€Œæ’é™¤`pre`ä¸­å…·æœ‰`code`æ ‡ç­¾çš„åä»£ã€‚

ç‰¹åˆ«éœ€è¦æ³¨æ„çš„åœ°æ–¹åœ¨äºï¼ŒShikiå¤„ç†`pre`æ ‡ç­¾æ ·å¼æ—¶å°†`background-color`å±æ€§è¿›è¡Œäº†å¼ºåˆ¶è®¾å®šã€‚æˆ‘ä»¬æŒ‡å®š`background-color`æ—¶ä¹Ÿéœ€è¦åŠ ä¸€ä¸ª`!important`ï¼Œæˆ‘ä»¬å®šä¹‰çš„æ ·å¼å°†å…·æœ‰æ›´é«˜ä¼˜å…ˆçº§ã€‚

æ­¤å¤–ï¼Œå¦‚æœä½¿ç”¨ç›¸åŒå­—å·ï¼Œ`ProseCode`ä¼šçœ‹èµ·æ¥å¾ˆå¤§ï¼Œå’Œå‘¨å›´æ–‡æœ¬æ ¼æ ¼ä¸å…¥ã€‚ä¸ºæ­¤éœ€è¦ç¼©å°å­—å·ï¼ˆè¿™ä¹Ÿæ˜¯æˆ‘å†™ä¸‹æœ¬æ–‡æ—¶StackOverflowçš„å¤„ç†æ–¹å¼ï¼‰ã€‚è¿˜éœ€è¦æ·»åŠ `margin`å’Œ`padding`ï¼Œä¸ç„¶åº•æ¡†å†…ä¼šæ˜¾å¾—è¿‡äºä¿ƒç‹­ï¼Œå¹¶ä¸”å’Œå¤–éƒ¨æ–‡æœ¬è´´å¾—è¿‡è¿‘ã€‚

æœ€ç»ˆçš„CSSå¦‚ä¸‹ï¼š

```css
.prose code:not(pre code, .not-prose) {
  background-color: var(--el-fill-color-dark) !important;
  border-radius: var(--el-border-radius-base);
  font-size: 0.875em;
  padding: 0.125em 0.375em;
  margin: 0 0.125em;
}
```

æ— è¯­æ³•é«˜äº®æ•ˆæœï¼š`const std::u8string_view title(u8"å¤§æ˜æ¹–");`

æœ‰è¯­æ³•é«˜äº®æ•ˆæœï¼š`const std::u8string_view title(u8"å¤§æ˜æ¹–");`{lang = "cpp"}

> **Note**ï¼šæˆ‘ä¸å®Œå…¨äº†è§£ä¸ºä½•åŒæ ·ç”±`!important`ä¿®é¥°ï¼Œæˆ‘çš„æ ·å¼æ¯”Shikiçš„ä¼˜å…ˆçº§æ›´é«˜ã€‚æˆ‘æŸ¥çœ‹äº†ä¸å¸¦`!important`æ—¶`pre`çš„æ ·å¼ï¼Œå…¶è¢«Shikiå®šä¹‰çš„`html .shiki`è§„åˆ™è¦†ç›–ã€‚æˆ‘æ¨æµ‹`:not()`ä¼ªç±»çš„å­˜åœ¨æé«˜äº†æˆ‘çš„è§„åˆ™çš„ä¼˜å…ˆçº§ã€‚

## `ProsePre`

è¿™ä¸ªç»„ä»¶è¦å®ç°å¥½çš„è¯ææ€•æ¯”è¾ƒå¤æ‚ï¼Œç›®å‰æˆ‘ä»¬çš„å®ç°å¹¶ä¸å®Œå…¨æ”¯æŒNuxt Contentæ‰€å®šä¹‰çš„MDCè¯­æ³•ã€‚åç»­è¿˜éœ€è¦æ·»åŠ é€»è¾‘å¤„ç†ï¼›ç›®å‰è¿™é‡Œåªæœ‰æ ·å¼å¤„ç†ã€‚

å¦å¤–ä¸€ä¸ªå®¹æ˜“æ¼æ‰çš„ç»†èŠ‚æ˜¯ï¼Œä¸`ProseCode`ä¸åŒï¼Œ`ProsePre`å¹¶ä¸æ˜¯è¡Œå†…å…ƒç´ ï¼Œå½“å®½åº¦è¶…è¿‡å®¹å™¨æ—¶ä¸ä¼šè‡ªåŠ¨æ¢è¡Œï¼Œè€Œæ˜¯ä¼šç»™æ•´ä¸ªå®¹å™¨æ·»åŠ æ¨ªå‘æ»šåŠ¨æ¡ã€‚ç”¨æˆ·è‚¯å®šä¸å¸Œæœ›è‡ªå·±åœ¨æ¨ªå‘æ»šåŠ¨ä»£ç å—æ—¶æ•´ä¸ªé¡µé¢éƒ½è·Ÿç€æ»šåŠ¨ï¼Œå› æ­¤éœ€è¦æ·»åŠ `overflow-x: scroll`å±æ€§ï¼ŒæŠŠæ»šåŠ¨é™åˆ¶åœ¨ä»£ç å—å†…éƒ¨ã€‚

æˆ‘çš„`ProsePre`å’Œ`ProseCode`å·®ä¸å¤šï¼Œä½†å®é™…ä¸Šå¹¶ä¸éœ€è¦å¦‚æ­¤ï¼Œ`ProsePre`å’Œ`ProseCode`çš„è®¾è®¡ä¸å¿…æœ‰ä»»ä½•å…³è”ã€‚ç„¶è€Œï¼Œ`background-color`åçš„`!important`ä»ç„¶æ˜¯å¿…è¦çš„ã€‚

```css
.prose pre:not(.not-prose) {
  background-color: var(--el-fill-color-dark) !important;
  border-radius: var(--el-border-radius-base);
  padding: 0.125em 0.625em;
  margin-left: 1em;
  margin-top: var(--app-prose-v-margin);
  margin-bottom: var(--app-prose-v-margin);
  overflow-x: scroll;
}
```

## `ProseHr`

ä¸ºäº†ç»Ÿä¸€é£æ ¼ï¼Œæˆ‘ä»¬åˆ›å»º`~/components/content/ProseHr.vue`ï¼Œä½¿ç”¨`ElDivider`ä½œä¸ºå”¯ä¸€æ ¹å…ƒç´ ã€‚ä¸éœ€è¦å…¶ä»–æ ·å¼æˆ–ä»£ç ã€‚

## `ProseH1`

ä¸€çº§æ ‡é¢˜æ˜¯æ–‡ç« ä¸»æ ‡é¢˜ï¼Œæ²¡æœ‰é”šç‚¹é“¾æ¥ç­‰ï¼Œæ¯”è¾ƒç®€å•ã€‚æˆ‘ä»¬åªéœ€è¦è®¾ç½®ä¸€ä¸ª`.prose h1:not(.not-prose)`è§„åˆ™ï¼Œä¸€èˆ¬ä¼šè®¾ç½®`font-size`å’Œ`font-weight`ä»¥çªå‡ºæ˜¾ç¤ºæ ‡é¢˜ã€‚æœ¬æ–‡ä¸å†å±•å¼€å™è¿°ã€‚

## `ProseH2`åˆ°`ProseH6`

### æ ·å¼è®¾ç½®

å„çº§æ ‡é¢˜éœ€è¦ä¸åŒå­—å·ã€åŠ ç²—ï¼ˆ`font-weight`ï¼‰å’Œç«–ç›´è¾¹è·ï¼Œéœ€è¦`.prose h2:not(.not-prose)`ç­‰è§„åˆ™ã€‚è¿™ä¸€éƒ¨åˆ†å¾ˆç®€å•ï¼Œä¸å†è¯¦ç»†å™è¿°ã€‚

### é”šç‚¹è®¾ç½®

é»˜è®¤æƒ…å†µä¸‹ï¼Œäº”çº§å…­çº§æ ‡é¢˜æ²¡æœ‰é”šç‚¹ã€‚å¦‚æœè¦è‡ªå®šä¹‰å“ªäº›çº§åˆ«çš„æ ‡é¢˜æœ‰é”šç‚¹ï¼Œéœ€è¦è®¾ç½®`nuxt.config.ts`ä¸­çš„`content.renderer.anchorLinks`é…ç½®é¡¹ï¼š

```ts
export default defineNuxtConfig({
  content: {
    renderer: {
      anchorLinks: {
        /* æœ€å¥½ä¸è¦è®¾ç½®h1ï¼Œæ–‡ç« ä¸»æ ‡é¢˜è®¾ç½®é”šç‚¹æ²¡ä»€ä¹ˆæ„ä¹‰ */
        h2: true,
        h3: true,
        h4: true,
        h5: true,
        h6: true
      }
    }
  }
});
```

### å‰ç½®äº•å·

åŒ…æ‹¬Vue 3ã€Nuxtã€Element Plusåœ¨å†…çš„è®¸å¤šæœ‰å…³æ¡†æ¶å’Œåº“å®˜ç½‘éƒ½æœ‰è¿™æ ·ä¸€ä¸ªè§†è§‰æ•ˆæœï¼šå½“é¼ æ ‡åœ¨æ ‡é¢˜è¡Œæ‚¬æµ®æ—¶ï¼Œæ ‡é¢˜å‰æ–¹ä¼šæ˜¾ç¤ºä¸€ä¸ªäº•å·ã€‚æˆ‘è§‰å¾—è¿™ä¸ªæ•ˆæœå¾ˆæœ‰æ„æ€ï¼Œè€Œä¸”å¯ä»¥çªå‡ºæ˜¾ç¤ºæ ‡é¢˜ï¼Œäºæ˜¯å†³å®šä¹ŸåŠ ä¸€ä¸ªã€‚è¿™åŒæ ·éœ€è¦`before`ä¼ªå…ƒç´ ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªä»å³åˆ°å·¦é€æ¸æ˜¾ç°çš„åŠ¨ç”»æ•ˆæœï¼Œé¼ æ ‡ç§»å¼€æ—¶ä¹Ÿä¼šå›åˆ°å³ä¾§å¹¶æ¶ˆå¤±ã€‚

ä½ç½®å‚æ•°é€šè¿‡`transform: translateX(å€¼)`æ¥å®ç°ï¼Œå¯è§æ€§é€šè¿‡`opacity`å¤„ç†ã€‚è¿˜éœ€è¦æ·»åŠ é’ˆå¯¹äºŒè€…çš„`transition`å±æ€§ã€‚

```css
.prose :where(h2, h3, h4, h5, h6):not(.not-prose) {
  position: relative;
}
.prose :where(h2, h3, h4, h5, h6):not(.not-prose)::before {
  content: '#';
  opacity: 0;
  color: var(--el-color-primary);
  position: absolute;
  transform: translateX(-50%);
  transition:
    opacity 0.3s ease,
    transform 0.3s ease;
}
.prose :where(h2, h3, h4, h5, h6):not(.not-prose):hover::before {
  opacity: 1;
  transform: translateX(-150%);
}
```

> **Note**ï¼š`transform`çš„ä½œç”¨æ˜¯å°†å…ƒç´ æŒ‰ç›¸å¯¹äºå…¶â€œæœ¬æ¥ä½ç½®â€è¿›è¡Œç§»åŠ¨ï¼Œä¸€èˆ¬ä¸`translateX()`å’Œ`translateY()`æ­é…ä½¿ç”¨ï¼Œåˆ†åˆ«è¿›è¡Œæ°´å¹³å’Œç«–ç›´æ–¹å‘åç§»ã€‚å¯¹äº`translateX()`è€Œè¨€ï¼Œå½“ç»™å‡ºçš„å€¼æ˜¯ä¸€ä¸ªç™¾åˆ†æ•°æ—¶ï¼Œå…ƒç´ å°†ä¼šç§»åŠ¨ç›¸å¯¹äºå…¶è‡ªèº«å®½åº¦çš„ç™¾åˆ†æ¯”ã€‚ä¸¾ä¾‹è€Œè¨€ï¼Œ`translateX(-100%)`ä¼šæŠŠå…ƒç´ æ”¾åˆ°å…¶æœ¬æ¥ä½ç½®çš„å·¦ä¾§ï¼Œæ­£å¥½ç´§è´´æœ¬æ¥ä½ç½®ï¼›`translateX(100%)`åˆ™æ˜¯å³ä¾§ã€‚
>
> è®¸å¤šæ¶‰åŠ`transform`çš„å®šä½éœ€è¦ç»å¯¹å®šä½ï¼Œä¹Ÿå³`position: absolute`ã€‚æ­¤æ—¶æ€»æ˜¯éœ€è¦åœ¨ä¸Šçº§å…ƒç´ åˆ›å»ºå®šä½ä¸Šä¸‹æ–‡ï¼Œä¹Ÿå³éœ€è¦åœ¨ä¸Šçº§å…ƒç´ ï¼ˆå¯¹ä¼ªå…ƒç´ è€Œè¨€ï¼Œæ˜¯ç›¸åŒè§„åˆ™å»æ‰ä¼ªå…ƒç´ ï¼‰ä¸­æ·»åŠ `position: relative`ã€‚
>
> **Note**ï¼š`opacity`è®¾ç½®å…ƒç´ é€æ˜åº¦ï¼Œ0æ˜¯å®Œå…¨é€æ˜ï¼Œ1æ˜¯å®Œå…¨ä¸é€æ˜ã€‚å¸¸ç”¨äºè®¾ç½®åŠ¨ç”»ã€‚

## `ProseP`

è¯¥ç»„ä»¶ç”¨äºæ¸²æŸ“`p`æ ‡ç­¾å…ƒç´ ã€‚ç‰¹åˆ«å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç”±äºNuxt Contentçš„ä¸€ä¸ªç›¸å½“è«åå…¶å¦™çš„è®¾è®¡ï¼Œæˆ‘ä»¬éœ€è¦å®ç°`~/components/content/ProseP.vue`ã€‚ç”±äºNuxt Contentä¼šåœ¨`ProseImg`å¤–æ·»åŠ ä¸€å¯¹`p`æ ‡ç­¾ï¼Œè€Œè¯¥æ ‡ç­¾ä¼šå¯¼è‡´å…¶å†…`div`æ ‡ç­¾ä¸èƒ½æ­£ç¡®å·¥ä½œï¼ŒåŒæ—¶`ProseImg`çš„è‡ªå®šä¹‰å®ç°åˆç»å¸¸éœ€è¦`div`æ ‡ç­¾ï¼Œè¿™å¯¼è‡´`ProseImg`ç»å¸¸ä¼šå‡ºé—®é¢˜ã€‚å¯¹æœ¬ç«™è€Œè¨€ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯å·¨é‡çš„æ°´åˆé”™è¯¯ä¿¡æ¯ï¼Œæœ‰æ—¶è¿˜ä¼šå¯¼è‡´Shikiä¸èƒ½æ­£å¸¸ä¸ºä»£ç å—ç€è‰²ã€‚

ä¸ºäº†é¿å…è¿™ä¸€é—®é¢˜ï¼Œéœ€è¦åˆ¤æ–­`ProseP`å†…æ˜¯å¦ç›´æ¥å†…åµŒäº†ä¸€ä¸ª`ProseImg`ï¼ˆé€šè¿‡åˆ¤æ–­ç¬¬ä¸€ä¸ªå­å…ƒç´ æ˜¯å¦å…·æœ‰`img`æ ‡ç­¾ï¼‰ï¼Œå¹¶åœ¨ä¸åŒç»„ä»¶å†…æ¸²æŸ“æ’æ§½ã€‚

```vue
<template>
  <div v-if="isImg"><slot /></div>
  <p v-else><slot /></p>
</template>

<script setup lang="ts">
const slots = useSlots();
const isImg = computed(() => {
  return (slots.default!()[0].type as any).tag == 'img';
});
</script>
```

è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬è·å–é»˜è®¤æ’æ§½å¹¶åˆ¤æ–­å…¶ç¬¬ä¸€ä¸ªå­å…ƒç´ æ˜¯å¦å…·æœ‰'img'æ ‡ç­¾ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œä½¿ç”¨`div`è€Œé`p`æ ‡ç­¾åŒ…è£¹æ’æ§½ã€‚å¦‚æ­¤å³å¯é¿å…å…¶å¯¹`ProseImg`çš„å¹²æ‰°ã€‚

> **Note**ï¼šå®é™…ä¸Šæˆ‘å¹¶ä¸å®Œå…¨äº†è§£è¿™æ®µä»£ç ã€‚æˆ‘èƒ½ç¡®å®šçš„éƒ¨åˆ†æ˜¯ï¼Œé€šè¿‡`slots`èƒ½è®¿é—®å½“å‰ç»„ä»¶çš„æ’æ§½ï¼Œå…¶å±æ€§ä¸»è¦æ˜¯æ‰€å…·æœ‰æ’æ§½çš„åå­—ï¼›`slots.default`å¯è·å–é»˜è®¤æ’æ§½ï¼Œç”±äºè¯¥ç»„ä»¶å¿…ç„¶å…·æœ‰é»˜è®¤æ’æ§½ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ éç©ºæ–­è¨€ã€‚è€Œå¯¹äºæ’æ§½åçš„æ‹¬å·ï¼Œæˆ‘åªèƒ½ç¡®è®¤è¿™æ˜¯Vueæ ‡å‡†APIçš„ä¸€éƒ¨åˆ†ï¼Œä½†æ²¡æœ‰æ‰¾åˆ°æ›´å¤šç»†èŠ‚ã€‚å®ƒåº”è¯¥æ˜¯ç”¨äºè·å–æ’æ§½å†…çš„å…ƒç´ ï¼Œä½†å…¶å†…éƒ¨å…·ä½“çš„ç»„ç»‡å½¢å¼ï¼Œæˆ‘åˆ™æ²¡æœ‰çœ‹åˆ°ä»»ä½•èµ„æ–™ã€‚è¯¥æ•°ç»„çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯`VNode`ï¼Œæœ‰å…³èµ„æ–™å‚è§[Vue 3è¿›é˜¶æ–‡æ¡£](https://cn.vuejs.org/guide/extras/render-function)ï¼Œè¯¥åŠŸèƒ½ä¼¼ä¹æ—¨åœ¨æä¾›æ›´å¼ºçš„è‡ªå®šä¹‰ç»„ä»¶èƒ½åŠ›ã€‚`type`å±æ€§æ˜¯`VNode`çš„ä¸€ä¸ªæ ‡å‡†å±æ€§ã€‚
>
> è‡³äº`tag`å±æ€§ï¼Œæˆ‘åˆ™å®Œå…¨æ²¡æœ‰æ‰¾åˆ°ä»»ä½•èµ„æ–™ï¼›æˆ‘æ¨æµ‹å®ƒç”±Nuxtæä¾›ï¼Œè€ŒNuxt 3æ–‡æ¡£å®Œå…¨æ²¡æœ‰æåŠä»»ä½•å…³äºè¯¥å±æ€§çš„å†…å®¹ã€‚

## `ProseImg`

åœ¨å…·ä½“ä»‹ç»å®ƒçš„å®ç°ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥é¦–å…ˆå¤ä¹ ä¸€ä¸‹markdownçš„åŸºæœ¬å›¾ç‰‡è¯­æ³•ï¼Œå¹¶ä»‹ç»å…¶å¯¹åº”çš„HTMLå±æ€§ï¼š

```markdown
![åŠ è½½å¤±è´¥æ›¿ä»£æ–‡å­—-å¯¹åº”alt](é“¾æ¥-å¯¹åº”src æ ‡é¢˜-å¯¹åº”title)
```

è¿™ä¸‰ä¸ªå±æ€§å¯ä»¥é€šè¿‡[Vueçš„å±æ€§é€ä¼ æœºåˆ¶](https://cn.vuejs.org/guide/components/attrs.html)ä¼ è¿›æ¥ã€‚

è¦é€ä¼ å±æ€§ç»™æŒ‡å®šå­å…ƒç´ ï¼Œéœ€è¦è¿›è¡Œä¸¤æ­¥æ“ä½œã€‚

ç¬¬ä¸€æ­¥ï¼Œç¦æ­¢å½“å‰ç»„ä»¶æ¥å—å±æ€§ã€‚åœ¨`<script setup>`éƒ¨åˆ†åŠ ä¸Šï¼š

```ts
defineOptions({
  inheritAttrs: false
});
```

ç¬¬äºŒæ­¥ï¼Œç»™éœ€è¦æ¥å—é€ä¼ å±æ€§çš„å…ƒç´ æ·»åŠ `v-bind="$attrs"`ã€‚

> **Note**ï¼šå¦‚æœéœ€è¦è®¿é—®é€ä¼ å±æ€§ä¸­çš„æŸä¸€ä¸ªï¼Œåªéœ€è¦é€šè¿‡æ–¹æ‹¬å·è¿ç®—ç¬¦ã€‚ä¾‹å¦‚ï¼Œè¦è·å–`alt`å±æ€§çš„ä¼ å…¥å€¼ï¼Œéœ€è¦ç”¨ï¼š`$attrs['alt']`ã€‚

### ç»„ä»¶è®¾è®¡

ç»„ä»¶åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š

- å›¾ç‰‡ï¼›
- å›¾ç‰‡åŠ è½½å¤±è´¥æ—¶çš„æ˜¾ç¤ºï¼›
- å›¾ç‰‡ä¸‹æ–¹æ ‡é¢˜ã€‚

ç»„ä»¶æ ¹æ˜¯ä¸€ä¸ª`div`ï¼Œå°†æ‰€æœ‰æœ‰å…³å†…å®¹ç»„ç»‡èµ·æ¥ã€‚æ ¹ä¸‹æ–¹åŒ…å«ä¸¤ä¸ªå…ƒç´ ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯`ElImage`ï¼Œå…¶`error`æ’æ§½è´Ÿè´£åœ¨å›¾ç‰‡åŠ è½½å¤±è´¥æ—¶æ˜¾ç¤ºå†…å®¹ï¼Œå…¶å†…å®¹ç”±`alt`å±æ€§å†³å®šã€‚ç¬¬äºŒä¸ªå…ƒç´ æ˜¾ç¤ºå›¾ç‰‡ä¸‹æ–¹æ ‡é¢˜ã€‚

åœ¨ç»„ä»¶è®¾è®¡ä¸­ï¼Œæ‰€æœ‰ä¸å±äº`ProseImg`æœ¬èº«çš„propså±æ€§çš„ä¼ å…¥å±æ€§éƒ½å°†è¢«é€ä¼ ç»™`ElImage`ï¼ŒåŒ…æ‹¬å±æ€§ã€‚è¿™ä¼šå¯¼è‡´æˆ‘ä»¬ä¼ å…¥çš„æ ·å¼æ— æ³•ä½œç”¨äºæ ¹å…ƒç´ ï¼›ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ propså±æ€§ï¼Œæˆ‘å°†å…¶å‘½åä¸º`containerStyle`å’Œ`containerClass`ã€‚å®é™…ä¸Šä½¿ç”¨ä»€ä¹ˆåå­—éƒ½å¯ä»¥ï¼Œåªéœ€è¦é¿å…æ³¨æ„åå­—å†²çªå¯¼è‡´å±æ€§æ— æ³•é€ä¼ ï¼ˆå› æ­¤ä¸èƒ½ç›´æ¥ç”¨`style`å’Œ`class`ä½œä¸ºpropså±æ€§åï¼‰ã€‚

æˆ‘ä»¬è¿˜éœ€è¦`caption`propså±æ€§ä¼ å…¥å›¾ç‰‡ä¸‹æ–¹é¢˜ç›®å†…å®¹ã€‚æœ‰æ—¶ç”¨æˆ·å¯èƒ½å¸Œæœ›é¼ æ ‡æ‚¬æµ®å†…å®¹å’Œä¸‹æ–¹æ–‡æœ¬ä¸åŒï¼Œå¦‚æœç›´æ¥ä½¿ç”¨`title`å±æ€§ï¼Œä¼šå‡å°‘çµæ´»æ€§ã€‚

æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¸Œæœ›æ–¹ä¾¿åœ°æ§åˆ¶å›¾ç‰‡å°ºå¯¸ã€‚å°ºå¯¸ç”±æ ·å¼å†³å®šï¼Œè€Œå¦‚æœæ¯æ¬¡éƒ½éœ€è¦ä¼ å…¥ä¸€æ•´ä¸ª`style`å±æ€§ï¼Œå›¾ç‰‡åµŒå…¥å°±æ˜¾å¾—æ ¼å¤–éº»çƒ¦ã€‚å› æ­¤æˆ‘ä»¬è¿˜å®šä¹‰ä¸€ç³»åˆ—å°ºå¯¸å±æ€§ï¼Œåœ¨`ProseImg`çš„ä»£ç éƒ¨åˆ†å°†å…¶åˆæˆä¸ºæ ·å¼å­—ç¬¦ä¸²ã€‚

> **Note**ï¼šè¯»è€…å¯èƒ½å·²ç»æƒ³åˆ°ï¼Œå°ºå¯¸propså±æ€§ä¼šè¢«æ‹¼æ¥ä¸º`style`ï¼Œè€Œå¤–éƒ¨ä¹Ÿå¯èƒ½é€ä¼ `style`ï¼Œè¿™å²‚ä¸ä¼šå†²çªï¼Ÿå®é™…ä¸Š[Vueä¼šåˆå¹¶é€ä¼ æ ·å¼ä¸ç»„ä»¶å†…æŒ‡å®šçš„å…ƒç´ æ ·å¼](https://cn.vuejs.org/guide/components/attrs#class-and-style-merging)ã€‚è€Œ[`style`çš„æ™®é€šå±æ€§å’Œç»‘å®šå±æ€§`:style`æ‰€æŒ‡å®šçš„æ ·å¼ä¹Ÿä¼šè¢«åˆå¹¶](https://cn.vuejs.org/guide/essentials/class-and-style.html#binding-to-objects)ã€‚ä»¥ä¸Šå†…å®¹å¯¹`class`ä¹Ÿé€‚ç”¨ã€‚å› æ­¤ï¼Œè¿™ä¸¤ä¸ªæ ·å¼å±æ€§ä¸ä¼šå› ä¸ºé€ä¼ æˆ–ç»‘å®šäº§ç”Ÿä»»ä½•å†²çªã€‚

> **Note**ï¼šå±æ€§ç»‘å®šä¸º`null`æˆ–`undefined`æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œ[è¿™æ ·åšä¼šç§»é™¤ç»‘å®š](https://cn.vuejs.org/guide/essentials/template-syntax.html#attribute-bindings)ã€‚å› æ­¤ï¼Œä¸ä¼ é€’æŸä¸ªpropsè€Œå°†å…¶ç›´æ¥ä¼ é€’ç»™å­å…ƒç´ æ€»æ˜¯ä¸ä¼šå‡ºé”™ã€‚

### ä»£ç å®ç°

```vue
<template>
  <div
    class="prose-img-container"
    :style="containerStyle"
    :class="containerClass"
  >
    <el-image
      loading="lazy"
      v-bind="$attrs"
      ref="imageContainer"
      :style="imageContainerStyle"
      style="display: block; margin: 0 auto"
    >
      <template #error>
        <div class="img-err" :style="imageContainerStyle">
          <el-icon><el-icon-picture /></el-icon>
          <span v-if="$attrs['alt']">{{ $attrs['alt'] }}</span>
        </div>
      </template>
    </el-image>
    <div
      v-if="caption"
      class="text-gray-300 text-sm"
      style="
        margin: 0 auto;
        text-align: center;
        position: relative;
        padding-top: 0.5em;
      "
      :style="captionStyle"
    >
      {{ caption }}
    </div>
  </div>
</template>

<script setup lang="ts">
defineOptions({
  inheritAttrs: false
});

const {
  caption,
  width,
  height,
  minWidth = '50px',
  maxWidth = '100%',
  minHeight = '50px',
  maxHeight = '100%',
  containerStyle,
  containerClass
} = defineProps<{
  caption?: string;
  width?: CssLength;
  height?: CssLength;
  minWidth?: CssLength;
  maxWidth?: CssLength;
  minHeight?: CssLength;
  maxHeight?: CssLength;
  containerStyle?: string;
  containerClass?: string;
}>();

let imageContainerStyle: string =
  'min-width: ' + minWidth + '; max-width: ' + maxWidth;
let captionStyle: string = imageContainerStyle;
imageContainerStyle +=
  '; min-height: ' + minHeight + '; max-height: ' + maxHeight;
if (width != undefined) imageContainerStyle += '; width: ' + width;
if (height != undefined) imageContainerStyle += '; height: ' + height;
</script>

<style scoped>
.img-prose-container {
  display: inline-block;
  justify-content: center;
  align-content: center;
  align-items: center;
}
.img-err {
  width: 100%;
  background: var(--el-fill-color-light);
  color: var(--el-text-color-secondary);
  display: flex;
  justify-content: center;
  align-content: center;
  align-items: center;
}
</style>
```

ä¾‹å¦‚ï¼Œè¦å¼•å…¥ä¸€ä¸ªå¯é€šè¿‡`/public/somepic.png`è®¿é—®çš„å›¾ç‰‡ï¼ŒåŠ è½½å¤±è´¥æ˜¾ç¤ºâ€œåŠ è½½å¤±è´¥â€ï¼Œä¸‹æ–¹æ–‡æœ¬æ ‡é¢˜å’Œé¼ æ ‡æ‚¬æµ®æ–‡æœ¬ä¸ºâ€œä¸€å¼ å›¾ç‰‡â€ï¼Œé«˜åº¦ä¸º300pxï¼Œéœ€è¦åœ¨markdownä¸­å†™ä¸‹ï¼š

```markdown
![åŠ è½½å¤±è´¥](/public/somepic.png 'ä¸€å¼ å›¾ç‰‡'){caption="ä¸€å¼ å›¾ç‰‡" height="300px"}
```

ä½ å¯èƒ½è¿˜æƒ³æ·»åŠ `style="width: 100%"`ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå³ä¾¿å›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œæ‰€å ç”¨çš„ä½ç½®ä¹Ÿä¸ä¼šå˜å¾—å¾ˆçª„ã€‚

## `ProseUl`ï¼Œ`ProseOl`å’Œ`ProseLi`

æˆ‘ä»¬é€šè¿‡`list-style-type`è®¾ç½®æ ‡è®°ç±»å‹ï¼Œ`padding-inline-start`è®¾ç½®è¡Œå†…ç¼©è¿›ï¼š

```css
.prose ul:not(.not-prose) {
  list-style-type: disc;
}
.prose ol:not(.not-prose) {
  list-style-type: decimal;
}
.prose :where(ul, ol):not(.not-prose) {
  padding-inline-start: 1.625em;
  margin: var(--app-prose-v-margin) 0;
}
.prose :where(ul, ol):not(.not-prose) > li::marker {
  color: var(--el-text-color-secondary);
}
.prose :where(ul, ol):not(.not-prose) > li {
  line-height: 1.625em;
  padding-inline-start: 0.375em;
}
/* é¿å…åµŒå¥—åˆ—è¡¨é—´é—´éš™è¿‡å¤§ */
.prose :where(ul, ol):not(.not-prose) :where(ul, ol) {
  margin: 0.25em 0;
}
```

è¿™é‡Œè¦ç‰¹åˆ«æ³¨æ„ä½¿ç”¨å­é€‰æ‹©å™¨æ¥é€‰æ‹©`li`å…ƒç´ ï¼Œè€Œéåä»£é€‰æ‹©å™¨ï¼Œå¦åˆ™åµŒå¥—åˆ—è¡¨å¯èƒ½å‡ºç°é¢„æœŸå¤–çš„æ ·å¼ã€‚

æ•ˆæœå¦‚ä¸‹ï¼š

- åˆ—è¡¨1
- åˆ—è¡¨2
  - åˆ—è¡¨2-1
  - åˆ—è¡¨2-2
- åˆ—è¡¨3
  1. åˆ—è¡¨3-1
  2. åˆ—è¡¨3-2

## `ProseStrong`å’Œ`ProseEm`

è¿™ä¸¤ä¸ªæ²¡ä»€ä¹ˆå¯è¯´çš„ï¼Œåˆ†åˆ«æ˜¯åŠ ç²—å’Œæ–œä½“ã€‚æ ¹æ®ä¸ªäººå–œå¥½è®¾å®šæ ·å¼å³å¯ã€‚

## `ProseTable`ç­‰è¡¨æ ¼ç»„ä»¶

ç›®å‰ï¼Œæˆ‘ä»¬åªç®€å•åœ°è®¾ç½®å…¶æ ·å¼ï¼š

```css
.prose table:not(.not-prose) {
  margin: var(--app-prose-v-margin) 0;
}
.prose :where(table, th, td):not(.not-prose) {
  border: 1px solid var(--el-border-color);
}
.prose :where(th, td):not(.not-prose) {
  padding: 0.375em 1em;
}
```

æ•ˆæœå¦‚ä¸‹ï¼š

| å·¦å¯¹é½ | å±…ä¸­ | å³å¯¹é½ |
| :----- | :--: | -----: |
| 1      |  ä¸€  |     ç”² |
| 2      |  äºŒ  |     ä¹™ |
| 3      |  ä¸‰  |     ä¸™ |

### æ‹“å±•ï¼šåµŒå¥—é€‰æ‹©å™¨Â·åç½®

è¿™é‡Œéå¸¸å€¼å¾—ä¸€æçš„æ˜¯ï¼Œè¿™ä¹Ÿæ˜¯éå¸¸å¥½çš„è®²è¿°åµŒå¥—é€‰æ‹©å™¨åç½®çš„ä¾‹å­ã€‚è¿™äº›è§„åˆ™åŒæ ·å¯ä»¥å†™æˆä¸€æ¡ï¼š

```css
.prose {
  & :not(.not-prose) {
    table& {
      margin: var(--app-prose-v-margin) 0;
    }
    :where(table, th, td)& {
      border: 1px solid var(--el-border-color);
    }
    :where(th, td)& {
      padding: 0.375em 1em;
    }
  }
}
```

åŒæ ·åœ°ï¼Œä¸è¦éšä¾¿æ·»åŠ ç©ºæ ¼ã€‚åªè¦ç†è§£äº†åµŒå¥—é€‰æ‹©å™¨çš„è¡Œä¸ºéå¸¸ç±»ä¼¼å®æ›¿æ¢ï¼Œä»¥åŠæ›¿æ¢æ˜¯â€œæ‡’æ›¿æ¢â€ï¼ˆä»å­è§„åˆ™å‘ä¸Šè¿›è¡Œå®é™…æ›¿æ¢ï¼‰ï¼Œå°±èƒ½å¾ˆå¥½åœ°ç†è§£è¿™æ®µä»£ç ã€‚
